I"’<div id="entry-table-of-contents" class="toc-wrapper">
  <h2 id="toc-toggle" class="no_toc">
  Table of Contents <i class="toc-toggle-icon fas fa-chevron-down"></i>
</h2>
<ol id="markdown-toc">
  <li><a href="#å‡½æ•°" id="markdown-toc-å‡½æ•°">å‡½æ•°</a></li>
  <li><a href="#è£…é¥°å™¨" id="markdown-toc-è£…é¥°å™¨">è£…é¥°å™¨</a></li>
  <li><a href="#references" id="markdown-toc-references">References</a></li>
</ol>

</div>

<h2 id="å‡½æ•°">å‡½æ•°</h2>
<p>åœ¨Pythonä¸­ï¼Œä¸€åˆ‡å‡½æ•°çš†å¯¹è±¡ã€‚å‡½æ•°ä½œä¸ºPythonä¸­çš„ä¸€ç­‰å…¬æ°‘ï¼Œå¯ä»¥è¿›è¡Œå¾ˆå¤šæœ‰ç”¨çš„æ“ä½œï¼š</p>

<ul>
  <li>å°†å‡½æ•°èµ‹ç»™å˜é‡</li>
</ul>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">greet</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="k">return</span> <span class="s">"hello "</span><span class="o">+</span><span class="n">name</span>

<span class="n">greet_someone</span> <span class="o">=</span> <span class="n">greet</span>
<span class="k">print</span> <span class="n">greet_someone</span><span class="p">(</span><span class="s">"John"</span><span class="p">)</span>

<span class="c1"># Outputs: hello John</span></code></pre></figure>

<ul>
  <li>åœ¨å‡½æ•°é‡Œå®šä¹‰å…¶ä»–å‡½æ•°</li>
</ul>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">greet</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_message</span><span class="p">():</span>
        <span class="k">return</span> <span class="s">"Hello "</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">get_message</span><span class="p">()</span><span class="o">+</span><span class="n">name</span>
    <span class="k">return</span> <span class="n">result</span>

<span class="k">print</span> <span class="n">greet</span><span class="p">(</span><span class="s">"John"</span><span class="p">)</span>

<span class="c1"># Outputs: Hello John</span></code></pre></figure>

<ul>
  <li>å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™å…¶ä»–å‡½æ•°</li>
</ul>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">greet</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
   <span class="k">return</span> <span class="s">"Hello "</span> <span class="o">+</span> <span class="n">name</span> 

<span class="k">def</span> <span class="nf">call_func</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="n">other_name</span> <span class="o">=</span> <span class="s">"John"</span>
    <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="n">other_name</span><span class="p">)</span>  

<span class="k">print</span> <span class="n">call_func</span><span class="p">(</span><span class="n">greet</span><span class="p">)</span>

<span class="c1"># Outputs: Hello John</span></code></pre></figure>

<ul>
  <li>å‡½æ•°å¯ä»¥è¿”å›å…¶ä»–å‡½æ•°</li>
</ul>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">compose_greet_func</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">get_message</span><span class="p">():</span>
        <span class="k">return</span> <span class="s">"Hello there!"</span>

    <span class="k">return</span> <span class="n">get_message</span>

<span class="n">greet</span> <span class="o">=</span> <span class="n">compose_greet_func</span><span class="p">()</span>
<span class="k">print</span> <span class="n">greet</span><span class="p">()</span>

<span class="c1"># Outputs: Hello there!</span></code></pre></figure>

<ul>
  <li>å†…éƒ¨å‡½æ•°å¯è¯»å–å¤–å‚</li>
</ul>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">compose_greet_func</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_message</span><span class="p">():</span>
        <span class="k">return</span> <span class="s">"Hello there "</span><span class="o">+</span><span class="n">name</span><span class="o">+</span><span class="s">"!"</span>

    <span class="k">return</span> <span class="n">get_message</span>

<span class="n">greet</span> <span class="o">=</span> <span class="n">compose_greet_func</span><span class="p">(</span><span class="s">"John"</span><span class="p">)</span>
<span class="k">print</span> <span class="n">greet</span><span class="p">()</span>

<span class="c1"># Outputs: Hello there John!</span></code></pre></figure>

<h2 id="è£…é¥°å™¨">è£…é¥°å™¨</h2>
<p>å…ˆçœ‹ä¸€ä¸ªå½¢è±¡çš„ä¾‹å­</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">entryExit</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">f</span> <span class="o">=</span> <span class="n">f</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">"Entering"</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">f</span><span class="p">.</span><span class="n">__name__</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">f</span><span class="p">()</span>
        <span class="k">print</span> <span class="s">"Exited"</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">f</span><span class="p">.</span><span class="n">__name__</span>

<span class="o">@</span><span class="n">entryExit</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="k">print</span> <span class="s">"inside func()"</span>

<span class="n">func</span><span class="p">()</span>

<span class="c1"># Outputs: 
# Entering func
# inside func()
# Exited func</span></code></pre></figure>

<p>è£…é¥°å™¨ä½œä¸ºä¸€ç§è¯­æ³•ç³–å¯ä»¥ä½¿ç”¨å‡½æ•°ä½œä¸ºå‚æ•°å¹¶ä¸”è¿”å›å‡½æ•°ã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼ŒPythonæä¾›è¯­æ³•ç³–æ¥è¿æ¥<code class="language-plaintext highlighter-rouge">entryExit</code>å’Œ<code class="language-plaintext highlighter-rouge">func</code>å‡½æ•°ï¼Œçœå´äº†<code class="language-plaintext highlighter-rouge">func = entryExit(func)</code>è¿™æ ·çš„ç¹å¤è¡¨è¾¾ã€‚ä¸€æ–¹é¢æä¾›æ›´åŠ ç®€æ´çš„ä»£ç ï¼Œå¦ä¸€æ–¹é¢ä¸ç”¨æ”¹å˜åŸå‡½æ•°çš„å‡½æ•°åã€‚</p>

<p>æ€»çš„æ¥è¯´ï¼Œè£…é¥°å™¨èƒ½è®©ä½ çš„ç¨‹åºæ›´åŠ ä¼˜é›…ã€‚å½“ä½ éœ€è¦æ‰©å±•æŸä¸ªå‡½æ•°ï¼Œå´åˆä¸æƒ³ä¿®æ”¹å®ƒï¼Œå°è¯•ä¸‹è£…é¥°å™¨å§ã€‚</p>

<h2 id="references">References</h2>

<ol>
  <li><a href="http://thecodeship.com/patterns/guide-to-python-function-decorators/">A guide to Pythonâ€™s function decorators</a></li>
  <li><a href="https://www.python.org/dev/peps/pep-0318/">Decorators for Functions and Methods</a></li>
  <li><a href="http://simeonfranklin.com/blog/2012/jul/1/python-decorators-in-12-steps/">Understanding Python Decorators in 12 Easy Steps!</a></li>
</ol>

:ET