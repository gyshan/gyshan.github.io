I"³<h2 id="é—®é¢˜æè¿°">é—®é¢˜æè¿°</h2>
<p>æœ€è¿‘ä¸€ç›´åœ¨å¼€å‘ä¸€ä¸ªå¾®ä¿¡å…¬ä¼—å·ï¼Œç”±äºåå°è®¡ç®—é‡è¾ƒå¤§ï¼Œnginxå¸¸å‡ºç°<code class="language-plaintext highlighter-rouge">timeout</code>é—®é¢˜ï¼Œç»è¿‡æ’æŸ¥ï¼Œå·²ç»è§£å†³ã€‚é”™è¯¯ä»£ç å½¢å¦‚ï¼š</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">14:12:16 web.1  | 2014-07-17 14:12:16 [30747] [INFO] Using worker: sync
14:12:16 web.1  | 2014-07-17 14:12:16 [30752] [INFO] Booting worker with pid: 30752
14:13:21 web.1  | 2014-07-17 14:13:21 [30747] [CRITICAL] WORKER TIMEOUT (pid:30752)
14:13:21 web.1  | 2014-07-17 03:43:21 [30752] [INFO] Worker exiting (pid: 30752)
14:13:21 web.1  | 2014-07-17 14:13:21 [30841] [INFO] Booting worker with pid: 30</code></pre></figure>

<h2 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h2>

<p>æ›´æ”¹<code class="language-plaintext highlighter-rouge">gunicorn</code>é…ç½®æ–‡ä»¶ï¼Œæˆ‘ç”¨çš„æ˜¯supervisorï¼Œæ•…<code class="language-plaintext highlighter-rouge">vi /etc/supervisor/con.f/name.conf</code>æ·»åŠ ä¸€è¡Œ<code class="language-plaintext highlighter-rouge">timeout = 60*60</code>ï¼Œé…ç½®å®Œæˆçš„name.confæ–‡ä»¶å¦‚ä¸‹ï¼š</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">[program:test]
		
command = /home/mirror/test/bin/gunicorn app:app -b localhost:8100
directory = /home/mirror/test
timeout = 60*60
user = mirror
autostart = true
autorestart = true
redirect_stderr = true
stdout_logfile = /home/mirror/logs/supervisor.log</code></pre></figure>

<p>æ›´æ”¹<code class="language-plaintext highlighter-rouge">nginx</code>é…ç½®ï¼Œè¡¥å……ä¸€è¡Œ<code class="language-plaintext highlighter-rouge">proxy_read_timeout 1200</code>ï¼Œnginxé»˜è®¤ä¸º60ç§’ã€‚æ•…<code class="language-plaintext highlighter-rouge">vi /etc/nginx/sites-enabled/test</code>ï¼Œé…ç½®å®Œæˆçš„testæ–‡ä»¶å¦‚ä¸‹ï¼š</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">server {
    listen 80;
    root /home/mirror/test;
    location / {
		proxy_pass http://127.0.0.1:8100;
		proxy_read_timeout 1200;
		}
    }</code></pre></figure>

<p>Done!</p>

<p class="notice"><strong>æ¸©é¦¨æç¤º</strong>: è‹¥é…ç½®å¤šä¸ªç«™ç‚¹ï¼Œéœ€å•ç‹¬é…ç½®gunicorn.confï¼Œç„¶åè¢«supervisorè°ƒç”¨.</p>

:ET