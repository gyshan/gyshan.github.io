<!DOCTYPE html>
<!--
    So Simple Jekyll Theme 3.1.1
    Copyright 2013-2018 Michael Rose - mademistakes.com | @mmistakes
    Free for personal and commercial use under the MIT license
    https://github.com/mmistakes/so-simple-theme/blob/master/LICENSE
-->
<html lang="en-US" class="no-js">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  

  
    
    <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>Useful shell commands for bioinformatics | Guangyu Corey Shan’s Blog</title>
<meta name="generator" content="Jekyll v3.8.2" />
<meta property="og:title" content="Useful shell commands for bioinformatics" />
<meta name="author" content="Corey" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Common shell commands" />
<meta property="og:description" content="Common shell commands" />
<link rel="canonical" href="http://localhost:4000/articles/useful-shell-commands-for-bioinformatics/" />
<meta property="og:url" content="http://localhost:4000/articles/useful-shell-commands-for-bioinformatics/" />
<meta property="og:site_name" content="Guangyu Corey Shan’s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-09-10T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@GuangyuShan" />
<meta name="twitter:creator" content="@Corey" />
<script type="application/ld+json">
{"description":"Common shell commands","author":{"@type":"Person","name":"Corey"},"@type":"BlogPosting","url":"http://localhost:4000/articles/useful-shell-commands-for-bioinformatics/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://shangyblog-1256840873.cos.ap-beijing.myqcloud.com/logo.svg"},"name":"Corey"},"headline":"Useful shell commands for bioinformatics","dateModified":"2016-09-10T00:00:00+08:00","datePublished":"2016-09-10T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/articles/useful-shell-commands-for-bioinformatics/"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  

  <script>
    /* Cut the mustard */
    if ( 'querySelector' in document && 'addEventListener' in window ) {
      document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + 'js';
    }
  </script>

  <link rel="stylesheet" href="https://shangyblog-1256840873.cos.ap-beijing.myqcloud.com/main.css">
  <link rel="alternate" type="application/atom+xml" title="Guangyu Corey Shan&#39;s Blog" href="/atom.xml">
<!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->


<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://localhost:4000/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/images/apple-touch-icon-144x144-precomposed.png">

</head>


  <body class="layout--post  useful-shell-commands-for-bioinformatics">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#primary-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    
  <div class="navigation-wrapper">
    <a href="#menu-toggle" id="menu-toggle">Menu</a>
    <nav id="primary-nav" class="site-nav animated drop">
      <ul><li><a href="/about/">About</a></li><li><a href="/posts/">Posts</a></li><li><a href="/tags/">Tags</a></li><li><a href="/publications/">Publications</a></li><li><a href="/search/">Search</a></li></ul>
    </nav>
  </div><!-- /.navigation-wrapper -->


    <header class="masthead">
  <div class="wrap">
    
      <a href="/" class="site-logo" rel="home" title="Guangyu Corey Shan's Blog">
        <img src="https://shangyblog-1256840873.cos.ap-beijing.myqcloud.com/logo.svg" class="site-logo-img animated fadeInDown" alt="Guangyu Corey Shan's Blog">
      </a>
    
    
      <h1 class="site-title animated fadeIn"><a href="/">Guangyu Corey Shan's Blog</a></h1>
      <p class="site-description animated fadeIn" itemprop="description">Notes on bioinformatics and data mining by G. Corey Shan</p>
    
  </div>
</header><!-- /.masthead -->


    <main id="main" class="main-content" aria-label="Content">
  <article class="h-entry">
    

    <div class="page-wrapper">
      <header class="page-header">
        
        
          <h1 id="page-title" class="page-title p-name">Useful shell commands for bioinformatics
</h1>
        
      </header>

      <div class="page-sidebar">
        <div class="page-author h-card p-author"><img src="/bio-photo.jpg" class="author-avatar u-photo" alt="Corey"><div class="author-info"><div class="author-name">
        <em>by</em> <span class="p-name">Corey</span>
      </div><ul class="author-links"><li class="author-link">
            <a class="u-url" rel="me" href="https://www.linkedin.com/in/corey-shan-6a6111a4/"><i class="fab fa-linkedin fa-lg" title="LinkedIn"></i></a>
          </li><li class="author-link">
            <a class="u-url" rel="me" href="https://github.com/gyshan"><i class="fab fa-github-square fa-lg" title="GitHub"></i></a>
          </li></ul>

<span class="read-time">1 min read</span>

    <time class="page-date dt-published" datetime="2016-09-10T00:00:00+08:00"><a class="u-url" href="">September 10, 2016</a>
</time>

  </div>
</div>

        
  <h3 class="page-taxonomies-title">Categories</h3>
  <ul class="page-taxonomies"><li class="page-taxonomy">articles</li>
  </ul>


        
  <h3 class="page-taxonomies-title">Tags</h3>
  <ul class="page-taxonomies"><li class="page-taxonomy">Bioinformatics</li>
  </ul>


      </div>

      <div class="page-content">
        <div class="e-content">
          <p>A large portion of biological data are raw files, such as fasta、fastq、bam（binary)、sam、vcf and so on.
Mostly, trying to deal with those files with shell commands towards small tasks are way much better than using stardard programming language(python and perl).
Here, I want to record some of those tricks.</p>

<h1 id="samtools">samtools</h1>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c">##1. Pre-process bam for certain software</span>
<span class="c"># cut bam to target region, bear in mind that chr1 is in [in.bam] </span>
samtools view <span class="nt">-b</span> <span class="o">[</span><span class="k">in</span>.bam] <span class="o">[</span>chr1:XXXXXXX-YYYYYYY] <span class="o">&gt;</span> <span class="o">[</span>out.bam]
<span class="c"># sort bam</span>
samtools <span class="nb">sort</span> <span class="o">[</span>out.bam] <span class="o">[</span>out.sorted.bam]
<span class="c"># index bam</span>
samtools index <span class="o">[</span>out.sorted.bam]
<span class="c">##2. Extract certain region from ref.fasta</span>
samtools faidx <span class="o">[</span>ref.fasta] chr1:XXXXXXX-YYYYYYY
<span class="c">##3. mpileup</span>
samtools mpileup <span class="nt">-d</span> 1000000 <span class="nt">-q</span> 30 <span class="nt">-Q</span> 30 <span class="nt">-A</span> <span class="nt">-B</span> <span class="nt">-l</span> <span class="o">[</span><span class="k">in</span>.bed] <span class="nt">-f</span> <span class="o">[</span>ref.fasta] <span class="o">[</span><span class="k">in</span>.bam] <span class="o">&gt;</span> <span class="o">[</span>out.mpileup]</code></pre></figure>

<h1 id="shell">shell</h1>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c">#1. Sort file according to column three.</span>
<span class="nb">sort</span> <span class="nt">-n</span> <span class="nt">-k3</span> <span class="o">[</span><span class="k">in</span>.file]
<span class="c">#2. Remove empty line from file</span>
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'/^$/d'</span> <span class="o">[</span><span class="k">in</span>.file] <span class="o">&gt;</span> <span class="o">[</span>out.file]
<span class="c">#3. Extract row that have str 'S' in  column six.</span>
<span class="nb">awk</span> <span class="s1">'$6 ~ /S/ {print}'</span> <span class="o">[</span><span class="k">in</span>.sam]
<span class="c">#4. Search bam file from certain directory</span>
find <span class="nb">.</span> <span class="nt">-name</span> <span class="s2">"</span><span class="se">\*</span><span class="s2">.bam"</span>
<span class="c">#5. Sum the fourth column from mpileup file.</span>
<span class="nb">awk</span> <span class="s1">'{ sum += $4 }; END { print sum }'</span> <span class="o">[</span>mpileup] <span class="o">&gt;</span> <span class="o">[</span>out.file]
<span class="c">#6. Sum the coverage of bed file</span>
<span class="nb">awk</span> <span class="nt">-F</span><span class="s1">'\t'</span> <span class="s1">'BEGIN{SUM=0}{ SUM+=$3-$2 }END{print SUM}'</span>
<span class="c">#7. Remove chr fro bed file</span>
<span class="nb">sed</span> <span class="s1">'s/^chr//'</span>
<span class="c">#8. Replace \s to \t in file</span>
<span class="nb">awk</span> <span class="nt">-v</span> <span class="nv">OFS</span><span class="o">=</span><span class="s2">"</span><span class="se">\t</span><span class="s2">"</span> <span class="s1">'$1=$1'</span>
<span class="c">#9. Get lines from file</span>
<span class="nb">sed</span> <span class="nt">-n</span> 2,4p somefile.txt
<span class="nb">sed</span> <span class="s1">'2,4!d'</span> somefile.txt</code></pre></figure>


        </div>

        
          <div class="page-share">
  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Farticles%2Fuseful-shell-commands-for-bioinformatics%2F" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--facebook btn--small"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i> <span>Share</span></a>
  <a href="https://twitter.com/intent/tweet?text=Useful+shell+commands+for+bioinformatics%20http%3A%2F%2Flocalhost%3A4000%2Farticles%2Fuseful-shell-commands-for-bioinformatics%2F" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--twitter btn--small"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i> <span>Tweet</span></a>
  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2Farticles%2Fuseful-shell-commands-for-bioinformatics%2F" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--linkedin btn--small"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> <span>LinkedIn</span></a>
  <a href="https://reddit.com/submit?title=Useful+shell+commands+for+bioinformatics&url=http%3A%2F%2Flocalhost%3A4000%2Farticles%2Fuseful-shell-commands-for-bioinformatics%2F" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--reddit btn--small"><i class="fab fa-fw fa-reddit" aria-hidden="true"></i> <span>Reddit</span></a>
</div>

        

        
          

        

        <nav class="page-pagination" role="navigation">
  
    <a class="page-previous" href="/articles/two-basic-skills-for-bioinformatician/">
      <h4 class="page-pagination-label">Previous</h4>
      <span class="page-pagination-title">
        <i class="fas fa-arrow-left"></i> Two basic skills for bioinformatician

      </span>
    </a>
  

  
    <a class="page-next" href="/articles/linux-redirection/">
      <h4 class="page-pagination-label">Next</h4>
      <span class="page-pagination-title">
        Linux redirection
 <i class="fas fa-arrow-right"></i>
      </span>
    </a>
  
</nav>

      </div>
    </div>
  </article>
</main>


    <footer id="footer" class="site-footer">
  <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
<div class="social-icons"><a class="social-icon" href="https://www.linkedin.com/in/corey-shan-6a6111a4/"><i class="fab fa-linkedin fa-2x" title="LinkedIn"></i></a><a class="social-icon" href="https://github.com/gyshan"><i class="fab fa-github-square fa-2x" title="GitHub"></i></a><a class="social-icon" href="/atom.xml"><i class="fas fa-rss-square fa-2x" title="Feed"></i></a></div><div class="copyright">
    
      <!-- <p>&copy; 2018 Guangyu Corey Shan's Blog. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://github.com/mmistakes/so-simple-theme" rel="nofollow">So Simple</a>.</p> -->
      <span>&copy; 2015-2018 Corey. 
      	Powered by <a href="https://jekyllrb.com/">Jekyll</a> using the <a href="https://github.com/mmistakes/so-simple-theme">So Simple Theme</a>. 
      	<!-- <br> -->
      	<!-- <a href='https://creativecommons.org/licenses/by-nc-sa/3.0/' target='_blank' rel="license" alt="Creative Commons License"><img src='/images/by-nc-sa.svg'></a> -->
      </span>

    
  </div>
</footer>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script src="https://shangyblog-1256840873.cos.ap-beijing.myqcloud.com/main.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.0.12/js/all.js"></script>


<!-- MathJax -->

<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

  </body>

</html>
